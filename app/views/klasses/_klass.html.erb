<% form_for klass, :method=>:put do |f| -%>
		<td id="time_interval"><%= h klass.time_interval %></td>
		<td id="unit"></td>
		<td id="classroom"><%= h klass.classroom %></td>
		<td id="teacher">
			<%# f.input :teacher, :label => t( :teacher ), :label=>false, :collection=>teachers %>
			<%# klass.build_teaching unless klass.teaching %>
			<% f.fields_for :teaching do |builder| %>
    		<%= builder.hidden_field :teacher_id if klass.teaching.status?( :confirmed ) %>
    		<%= builder.collection_select :teacher_id, teachers, :id, :name,
    			{:include_blank=>true},
    			{:disabled=>klass.teaching.status?( :confirmed ) ? true : false } %>
  		<% end %>
  		<%= submit_tag klass.teaching.confirmed_symbol,
  			:id => 'confirm',
  			:name => 'klass[toggle_confirmation]',
  			:class => klass.teaching.status[0],
  			:disabled => (klass.teaching.status?( :confirmed )&&!klass.teaching.status?( :untaught )) ? true : false unless klass.teaching.teacher.nil? %>
  			
  		<%=	submit_tag klass.teaching.taught_symbol,
  			:id => 'teach',
  			:name => 'klass[toggle_taught]',
  			:class => klass.teaching.status[1] if klass.teaching.status? :confirmed %>
		</td>
		<% klass.attendances.each_with_index do |a,i| %>
			<td id="student<%= (i+1) %>"><%= image_tag( avatar_mini_url( a.student ), :title => a.student.name, :alt => a.student.name ) %></td>
		<% end %>
		<% (klass.capacity.to_i-klass.attendances.count).times do |i| %>
			<td id="student<%= (i+1) %>"></td>
    <% end %>
    <% (8-klass.capacity.to_i).times do |i| %>
  		<td>x</td>
  	<% end %>

		<td id="links">
			<% if can? :show, klass %>
				<%= link_to t('show'), klass %>
			<% end %>
			<% if can? :edit, klass %>
				<%= link_to t('edit'), edit_klass_path(klass) %>
			<% end %>
			<% if can? :destroy, klass %>
				<%= link_to t('delete'), klass, :confirm => klass.teachings.empty? ? t(:sure?) : t(:sure_with_teachings?), :method => :delete %>
			<% end %>
		</td>	
		<td><%= f.submit "OK!" %></td>
<% end -%>